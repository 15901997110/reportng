## This macro formats the results (whether passed, skipped or failed) of the test
## methods in a single class for inclusion in the HTML report.  It assumes that the
## the results are in a variable called $sortedResults and that the class is referred
## to by the $testClass variable.  $id is a page scope variable that is used to assign
## unique identifiers to divs.

#foreach( $testResult in $sortedResults.get($testClass) )
<tr style="border-bottom: 1px solid #000000;">
  <td>$testResult.name</td>
  <td>$utils.formatDuration($testResult.startMillis, $testResult.endMillis)s</td>
  <td>
    #if( $testResult.method.description.length() > 0 )
    <i>$testResult.method.description</i><br />
    #end
    #set( $output = $utils.getTestOutput($testResult) )
    #if( $output.size() > 0)
    <div class="output">
      #foreach( $line in $output )
      $line<br />
      #end
    </div>
    #end
    #if( $testResult.throwable )
    <a href="javascript:toggleDiv('exception-$id')" title="Click to expand/collapse"><b>$utils.escapeString( $testResult.throwable.toString() )</b></a><br />
    <div class="small" style="display: none;" id="exception-$id">
      #foreach( $element in $testResult.throwable.stackTrace )
      $element<br />
      #end
      #set( $causes = $utils.getCauses($testResult.throwable) )
      #foreach( $throwable in $causes )
      #set ($id = $id + 1)
      <b>Caused by: </b> <a href="javascript:toggleDiv('exception-$id')" title="Click to expand/collapse">$utils.escapeString( $throwable.toString() )</a><br />
      <div style="display: none;" id="exception-$id">
        #foreach( $element in $throwable.stackTrace )
        $element<br />
        #end
      </div>
      #end
    </div>
    #end
    #set ($id = $id + 1)
  </td>
</tr>
#end
